(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5175],{10785:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i="ellipsis",s=["ellipsis-h"],a="f141",l="M432 256a48 48 0 1 1 -96 0 48 48 0 1 1 96 0zm-160 0a48 48 0 1 1 -96 0 48 48 0 1 1 96 0zM64 304a48 48 0 1 1 0-96 48 48 0 1 1 0 96z";t.definition={prefix:"far",iconName:i,icon:[448,512,s,a,l]},t.faEllipsis=t.definition,t.prefix="far",t.iconName=i,t.width=448,t.height=512,t.ligatures=s,t.unicode=a,t.svgPathData=l,t.aliases=s},34957:function(e,t){"use strict";t.DF={prefix:"far",iconName:"layer-plus",icon:[576,512,["layer-group-plus"],"f5ff","M464 4c-11 0-20 9-20 20V60H408c-11 0-20 9-20 20s9 20 20 20h36v36c0 11 9 20 20 20s20-9 20-20V100h36c11 0 20-9 20-20s-9-20-20-20H484V24c0-11-9-20-20-20zM288 128c-8.5 0-17 1.7-24.8 5.1L53.9 222.8C40.6 228.5 32 241.5 32 256s8.6 27.5 21.9 33.2l209.3 89.7c7.8 3.4 16.3 5.1 24.8 5.1s17-1.7 24.8-5.1l209.3-89.7c13.3-5.7 21.9-18.8 21.9-33.2s-8.6-27.5-21.9-33.2L312.8 133.1c-7.8-3.4-16.3-5.1-24.8-5.1zm-5.9 49.2c1.9-.8 3.9-1.2 5.9-1.2s4 .4 5.9 1.2L477.7 256 293.9 334.8c-1.9 .8-3.9 1.2-5.9 1.2s-4-.4-5.9-1.2L98.3 256l183.8-78.8zM85.1 337.4L53.9 350.8C40.6 356.5 32 369.5 32 384s8.6 27.5 21.9 33.2l209.3 89.7c7.8 3.4 16.3 5.1 24.8 5.1s17-1.7 24.8-5.1l209.3-89.7c13.3-5.7 21.9-18.8 21.9-33.2s-8.6-27.5-21.9-33.2l-31.2-13.4L430 363.5 477.7 384 293.9 462.8c-1.9 .8-3.9 1.2-5.9 1.2s-4-.4-5.9-1.2L98.3 384 146 363.5 85.1 337.4z"]},t.Oq=t.DF},93181:function(e,t){"use strict";t.DF={prefix:"far",iconName:"line-columns",icon:[512,512,[],"f870","M24 40H200c13.3 0 24 10.7 24 24s-10.7 24-24 24H24C10.7 88 0 77.3 0 64S10.7 40 24 40zm0 128H200c13.3 0 24 10.7 24 24s-10.7 24-24 24H24c-13.3 0-24-10.7-24-24s10.7-24 24-24zM0 320c0-13.3 10.7-24 24-24H200c13.3 0 24 10.7 24 24s-10.7 24-24 24H24c-13.3 0-24-10.7-24-24zM24 424H200c13.3 0 24 10.7 24 24s-10.7 24-24 24H24c-13.3 0-24-10.7-24-24s10.7-24 24-24zM288 192c0-13.3 10.7-24 24-24H488c13.3 0 24 10.7 24 24s-10.7 24-24 24H312c-13.3 0-24-10.7-24-24zM312 40H488c13.3 0 24 10.7 24 24s-10.7 24-24 24H312c-13.3 0-24-10.7-24-24s10.7-24 24-24zM288 320c0-13.3 10.7-24 24-24H488c13.3 0 24 10.7 24 24s-10.7 24-24 24H312c-13.3 0-24-10.7-24-24zm24 104H488c13.3 0 24 10.7 24 24s-10.7 24-24 24H312c-13.3 0-24-10.7-24-24s10.7-24 24-24z"]},t.Jm=t.DF},849:function(e,t){"use strict";t.DF={prefix:"far",iconName:"lock",icon:[448,512,[128274],"f023","M144 128v64H304V128c0-44.2-35.8-80-80-80s-80 35.8-80 80zM96 192V128C96 57.3 153.3 0 224 0s128 57.3 128 128v64h32c35.3 0 64 28.7 64 64V448c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V256c0-35.3 28.7-64 64-64H96zM48 256V448c0 8.8 7.2 16 16 16H384c8.8 0 16-7.2 16-16V256c0-8.8-7.2-16-16-16H64c-8.8 0-16 7.2-16 16z"]},t.by=t.DF},50882:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i="pen-to-square",s=["edit"],a="f044",l="M441 58.9L453.1 71c9.4 9.4 9.4 24.6 0 33.9L424 134.1 377.9 88 407 58.9c9.4-9.4 24.6-9.4 33.9 0zM209.8 256.2L344 121.9 390.1 168 255.8 302.2c-2.9 2.9-6.5 5-10.4 6.1l-58.5 16.7 16.7-58.5c1.1-3.9 3.2-7.5 6.1-10.4zM373.1 25L175.8 222.2c-8.7 8.7-15 19.4-18.3 31.1l-28.6 100c-2.4 8.4-.1 17.4 6.1 23.6s15.2 8.5 23.6 6.1l100-28.6c11.8-3.4 22.5-9.7 31.1-18.3L487 138.9c28.1-28.1 28.1-73.7 0-101.8L474.9 25C446.8-3.1 401.2-3.1 373.1 25zM88 64C39.4 64 0 103.4 0 152V424c0 48.6 39.4 88 88 88H360c48.6 0 88-39.4 88-88V312c0-13.3-10.7-24-24-24s-24 10.7-24 24V424c0 22.1-17.9 40-40 40H88c-22.1 0-40-17.9-40-40V152c0-22.1 17.9-40 40-40H200c13.3 0 24-10.7 24-24s-10.7-24-24-24H88z";t.definition={prefix:"far",iconName:i,icon:[512,512,s,a,l]},t.faPenToSquare=t.definition,t.prefix="far",t.iconName=i,t.width=512,t.height=512,t.ligatures=s,t.unicode=a,t.svgPathData=l,t.aliases=s},70571:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/library",function(){return i(55712)}])},55712:function(e,t,i){"use strict";i.r(t),i.d(t,{__N_SSP:function(){return eo},default:function(){return ed}});var s=i(97458),a=i(52983),l=i(71485),n=i(68493),c=i(62361),r=i(35649),o=i(65531),d=i.n(o),m=i(32647),u=i(71031),h=i(75313),x=i(62711),g=i(849),v=i(97905),p=i(88983),f=i(67691),j=i(6071),b=i(51746),N=i(21429);let k=e=>{let{collection:t,testId:i}=e,{ownerUser:a,contributorUsers:l}=(0,v.gO)(t),n=()=>{var e;return(0,s.jsxs)(p.ZP,{className:"group relative pr-sm pt-sm",variant:"background",children:[(0,s.jsx)(p.ZP,{className:"absolute top-0 right-0 bottom-sm left-sm rounded-xl opacity-50 transition-all  duration-200  group-hover:!bg-super",variant:"offsetPlus"}),(0,s.jsx)(p.ZP,{className:"absolute inset-xs rounded-lg ring-2 !ring-background transition-all  dark:!ring-backgroundDark",variant:"offset"}),(0,s.jsxs)(p.ZP,{variant:"offset",bgHover:"offsetPlus",className:"relative cursor-pointer rounded-md  p-md ring-2 !ring-background dark:!ring-backgroundDark",children:[(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("div",{className:"flex items-center gap-x-sm",children:[t.emoji&&(0,s.jsx)("div",{className:"-mt-xs",children:(0,s.jsx)(h.B,{unified:null!==(e=t.emoji)&&void 0!==e?e:f.$Y,size:"small"})}),(0,s.jsx)(j.Z,{testId:"collection-preview-title",variant:"baseSemi",className:"line-clamp-2",children:t.title})]})}),(0,s.jsxs)("div",{className:"mt-sm flex items-center justify-between gap-x-md",children:[(0,s.jsxs)("div",{className:"flex items-center gap-x-md",children:[t.access===b.uv.PRIVATE_READ&&(0,s.jsx)(j.Z,{variant:"tiny",color:"light",children:(0,s.jsx)(r.G,{icon:g.by})}),(0,s.jsxs)("div",{className:"flex items-center gap-x-xs",children:[(0,s.jsx)(j.Z,{variant:"tiny",color:"light",children:(0,s.jsx)(r.G,{icon:x.Kr})}),(0,s.jsx)(j.Z,{variant:"tiny",color:"light",children:t.thread_count>0&&t.thread_count?t.thread_count>=99?"99+":t.thread_count:"No threads"})]}),(0,s.jsx)("div",{className:"flex items-center gap-x-xs",children:(0,s.jsx)(j.Z,{variant:"tiny",color:"light",children:(0,s.jsx)(N.Z,{timestamp:t.updated_datetime,isRecentHidden:!0,layoutType:"bottom"})})})]}),(0,s.jsxs)(u.Z,{size:"small",showMore:!1,children:[null!=a&&(0,s.jsx)(m.Z,{size:"small",user:a.image}),l.map((e,t)=>(0,s.jsx)(m.Z,{size:"small",user:e.image},e.image))]})]})]})]})};return t.slug?(0,s.jsx)(d(),{"data-testid":i,href:"/collections/".concat(t.slug),className:"block",children:(0,s.jsx)(n,{})}):(0,s.jsx)(n,{})};var C=i(2763),y=i(85490),P=i(10785),w=i(75987),M=i(93181),_=i(22438),Z=i(80937),L=i(39300),S=i(33326),z=i(32100),H=i(27372),T=i(85393),I=i(2171);let E=e=>{let{handleOpenCollectionCreateEditModal:t,handleOpenQuickAsk:i,tabType:a,setTabType:n,setDeleteAllModalOpen:c,setSearchTermInput:r,loading:o,searchTermInput:d}=e,m=(0,l.useTranslations)("threads.main"),u=(0,l.useTranslations)("shared"),{isMobileStyle:h,isMobileUserAgent:g}=(0,z.d)(),v=(0,y.N)(),f=[{icon:P.faEllipsis,visible:h,items:[{text:m("tooltipDeleteThreads"),icon:S.$,onClick:()=>c(!0)}]},{text:m("tooltipCreateCollectionTitle"),icon:Z.r8,variant:"primary",visible:h,items:[{text:m("tooltipCreateThread"),icon:M.Jm,onClick:i},{text:m("tooltipCreateCollection"),icon:x.Kr,onClick:t}]}];return(0,s.jsxs)(p.ZP,{variant:"background",className:"sticky top-0 z-[15]",children:[(0,s.jsx)(H.Z,{title:m("mainTitle"),icon:L.G1,center:"lg",isMobileStyle:h,actionList:f,search:(0,s.jsx)(T.Z,{isMobileUserAgent:g,type:"search",value:d,placeholder:m("searchPlaceholder"),autoFocus:!1,onChange:e=>{r(e.target.value)},isLoading:o})}),(0,s.jsx)(p.ZP,{className:"h-14 border-b md:hidden",children:(0,s.jsx)(I.n,{fillSpace:!0,layout:"center",actionList:[{icon:x.Kr,text:u("threads"),show:!0,active:"threads"===a,onClick:()=>{n("threads")}},{icon:_.Oe,text:u("articles"),active:"articles"===a,show:v,onClick:()=>{n("articles")}},{icon:w.wx,text:u("collections"),active:"collections"===a,show:!0,onClick:()=>{n("collections")}}]})})]})};var O=i(4461),D=i(13417),V=i(4544);let A=()=>{let e=(0,V.nO)(),{data:t,isLoading:i}=(0,D.a)({enabled:!!e,queryKey:["fetch_invited_collections"],queryFn:()=>null==e?void 0:e.emitWithAck("fetch_invited_collections",{})});return{isLoading:i,invitedCollections:t}};var F=i(93314),R=i(22119),G=i(28305),W=i(37852),K=i(68213),q=i(21026),$=i(10442),B=i(31024);let X=(e,t)=>{var i;return e&&(null===(i=e[0])||void 0===i?void 0:i.has_next_page)?t.length+1:void 0},Q=()=>{var e,t,i,s,a,l,n;let{searchTerm:c}=(0,q.p)(),r=(0,B.Z)("list_ask_articles",G.O_,!!c,X,{search_term:c}),o=null!==(l=null===(t=r.data)||void 0===t?void 0:null===(e=t.pageParams)||void 0===e?void 0:e.length)&&void 0!==l?l:1,d=null!==(n=null===(i=r.data)||void 0===i?void 0:i.pages)&&void 0!==n?n:[],m=d.flat(),u=null===(a=d[d.length-1])||void 0===a?void 0:null===(s=a[0])||void 0===s?void 0:s.has_next_page;return{...r,data:m,paginationInfo:{currentPage:o,hasNextPage:u,hasPreviousPage:o>1,getNextPage:()=>r.fetchNextPage(),getPreviousPage:()=>r.fetchPreviousPage()}}};var U=i(66632);let Y=e=>{let{}=e,t=(0,a.useRef)(void 0),i=Q(),{searchTerm:l}=(0,q.p)(),n=i.data,c=(0,a.useCallback)(()=>{i.paginationInfo.hasNextPage&&!i.isLoading&&i.paginationInfo.getNextPage()},[i]),r=t.current===l&&i.isLoading||"fetching"===i.fetchStatus,o=!i.isLoading&&"idle"===i.fetchStatus;return(0,s.jsx)(U.f,{articles:n,hasNextPage:i.paginationInfo.hasNextPage,showLoadingState:r,showEmptyState:o,fetchNextPage:c})};var J=i(64088);let ee=e=>{let{}=e,t=(0,a.useRef)(void 0),i=(0,G.Qk)(),{searchTerm:l}=(0,q.p)(),n=i.data,c=(0,a.useCallback)(()=>{i.paginationInfo.hasNextPage&&!i.isLoading&&i.paginationInfo.getNextPage()},[i]),r=t.current===l&&i.isLoading||"fetching"===i.fetchStatus,o=!i.isLoading&&"idle"===i.fetchStatus;return(0,s.jsx)(J.B,{threads:n,type:J.W.LIBRARY,hasNextPage:i.paginationInfo.hasNextPage,showLoadingState:r,showEmptyState:o,fetchNextPage:c})};var et=i(7717),ei=i(79738),es=i(19494),ea=i(71166),el=i(77837),en=i.n(el),ec=()=>{let[e,t]=(0,a.useState)(!1),[i,r]=(0,a.useState)("threads"),[o,d]=(0,a.useState)(""),[m,u]=(0,a.useState)(!1),{searchTerm:h,updateUserInput:g}=(0,q.p)(),{isMobileStyle:v}=(0,z.d)(),f=(0,c.useRouter)(),{data:N}=(0,n.useSession)(),M=(0,y.N)(),L=(0,G.Qk)(),{collections:T}=(0,F.l)(),{invitedCollections:D}=A(),{deleteAllThreads:V}=(0,R.l)(),{openModal:B}=(0,K.X)(),{trackEvent:X}=(0,W.WS)(),Q=(0,a.useCallback)(()=>{X("new thread click on threads page",{}),B("quickSearchModal",null)},[X,B]),U=(0,l.useTranslations)("threads.main"),J=(0,l.useTranslations)("shared"),{acceptCollectionInvite:el,declineCollectionInvite:ec}=(0,O.a)(),er=(0,a.useCallback)(()=>{N?B("collectionCreateOrEdit",{frontendContextUUID:void 0,existingCollection:null,searchTerm:h}):B("loginModal",{origin:b.FM.COLLECTIONS})},[B,h,N]),eo=(0,a.useCallback)(()=>{u(!1),V()},[V]),ed=(0,a.useCallback)(en()((e,t)=>{(""!==e||void 0!==t)&&g({searchTerm:e})},200,{leading:!0,trailing:!0,maxWait:600}),[]);(0,a.useEffect)(()=>{ed(o,h)},[o]),(0,a.useEffect)(()=>{L.isSuccess&&t(!0)},[L.isSuccess]);let em=[{icon:x.Kr,text:J("threads"),show:!0,active:"threads"===i,onClick:()=>{r("threads")}},{icon:_.Oe,text:J("articles"),active:"articles"===i,show:M,onClick:()=>{r("articles")}}];return(0,s.jsxs)(C.L.Content,{childrenWidth:"large",mobileHeader:!1,header:(0,s.jsx)(E,{searchTermInput:o,setSearchTermInput:d,tabType:i,setTabType:r,handleOpenQuickAsk:Q,setDeleteAllModalOpen:u,loading:L.isLoading&&e,handleOpenCollectionCreateEditModal:er}),children:[(0,s.jsxs)("div",{className:"grid-cols-12 gap-xl md:grid ",children:[(0,s.jsxs)("div",{className:"col-span-8 md:mt-lg",children:[(0,s.jsx)("div",{className:"hidden md:block",children:M?(0,s.jsxs)(p.ZP,{className:"flex items-center justify-between border-b",children:[(0,s.jsx)(I.n,{layout:"left",actionList:em}),(0,s.jsxs)("div",{className:"flex items-center gap-x-sm",children:[(0,s.jsx)(et.G,{isMobileStyle:v,items:[{icon:S.$,show:!0,text:U("tooltipDeleteThreads"),onClick:()=>u(!0)}],children:(0,s.jsx)(ei.Z,{size:"small",icon:P.faEllipsis})}),(0,s.jsx)(et.G,{isMobileStyle:v,items:[{icon:_.Oe,text:J("article"),onClick:()=>{f.push("/article/new")},show:!0},{icon:x.Kr,text:J("thread"),onClick:Q,show:!0}],children:(0,s.jsx)(es.Z,{size:"small",text:"Create",icon:Z.r8})})]})]}):(0,s.jsx)(H.Z,{icon:x.Kr,title:J("threads"),variant:"section",isMobileStyle:v,actionList:[{icon:P.faEllipsis,visible:!0,items:[{text:U("tooltipDeleteThreads"),icon:S.$,onClick:()=>u(!0)}]},{icon:Z.r8,onClick:Q,visible:!v}]})}),"threads"===i?(0,s.jsx)(ee,{}):null,"articles"===i?(0,s.jsx)(Y,{}):null]}),(0,s.jsxs)("div",{className:"col-span-4 md:mt-lg",children:[(0,s.jsx)("div",{className:"hidden md:block",children:(0,s.jsx)(H.Z,{isMobileStyle:v,icon:w.wx,title:J("collections"),variant:"section",testId:"col-header-collection-create",actionList:[{icon:Z.r8,onClick:er,visible:!v,testId:"col-header-collection-create"}]})}),v&&"collections"===i||!v?(0,s.jsxs)("div",{className:"my-md space-y-sm",children:[null==D?void 0:D.map(e=>(0,s.jsx)("div",{children:(0,s.jsx)($.Z,{collection:e,acceptInvite:t=>{el({collection:e})},declineInvite:t=>{ec({collection:e})}})},e.uuid)),(null==T?void 0:T.length)===0&&(0,s.jsxs)(p.ZP,{variant:"offset",className:"rounded-md p-md text-center",children:[(0,s.jsx)(j.Z,{color:"light",className:"mb-sm",children:U("emptyStateMessage")}),(0,s.jsx)(es.Z,{testId:"col-create-new-collection",size:"small",text:U("getStarted"),variant:"primary",fullWidth:!0,onClick:er})]}),(Array.isArray(T)?T:[]).map(e=>(0,s.jsx)(k,{testId:"collection-preview",collection:e},e.uuid))]}):(0,s.jsx)(s.Fragment,{})]})]}),(0,s.jsx)(ea.Z,{isOpen:m,onClose:()=>u(!1),message:U("deleteAllThreadsModalTitle"),actionList:[{text:J("nevermind"),onClick:()=>u(!1)},{text:J("confirm"),variant:"rejected",onClick:eo}]})]})},er=i(75630),eo=!0,ed=()=>{let e=(0,er.lG)(),{openModal:t}=(0,K.X)(),[i,n]=(0,a.useState)(!1),c=(0,l.useTranslations)("library");return(0,a.useEffect)(()=>{i||e||(n(!0),t("loginModal",{pitchMessage:{title:c("loginPrompt",{threads:"Threads"})},origin:b.FM.LIBRARY_PAGE}))},[e,t,i,c]),(0,s.jsx)(ec,{})}},27372:function(e,t,i){"use strict";var s=i(97458),a=i(35649),l=i(51865),n=i.n(l),c=i(52983),r=i(88983),o=i(6071),d=i(19494),m=i(7717),u=i(51746);t.Z=e=>{let{title:t,icon:i,subtitle:l,actionList:h,search:x,variant:g="page",noBorder:v=!1,center:p="md",background:f="background",testId:j,isMobileStyle:b}=e,N=h&&h.length>0&&(0,s.jsx)("div",{className:"flex gap-x-sm",children:null==h?void 0:h.map((e,t)=>{var i,a;return e.visible?e.items&&e.items.length>0?(0,s.jsx)(m.G,{isMobileStyle:b,items:e.items,children:(0,s.jsx)(d.Z,{testId:j,size:u.$u.small,text:e.text,variant:e.variant,icon:e.icon,onClick:e.onClick,debounce:e.debounce})},null!==(i=e.text)&&void 0!==i?i:t):(0,s.jsx)("div",{className:"h-full relative flex items-center",children:(0,s.jsx)(d.Z,{testId:j,size:u.$u.small,text:e.text,variant:e.variant,icon:e.icon,onClick:e.onClick,toolTip:e.tooltip,tooltipLayout:"bottom",disabled:e.disabled,debounce:e.debounce})},null!==(a=e.text)&&void 0!==a?a:t):(0,s.jsx)(c.Fragment,{},t)})}),k=(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center gap-x-sm ",children:[i&&(0,s.jsx)(o.Z,{variant:"page"===g?"page-title":"section-title",children:(0,s.jsx)(a.G,{fixedWidth:!0,icon:i})}),(0,s.jsx)(o.Z,{variant:"page"===g?"page-title":"section-title",children:t})]}),l&&(0,s.jsx)(o.Z,{variant:"page"===g?"base":"small",color:"light",className:"mt-sm",children:l})]});return(0,s.jsx)(r.ZP,{variant:f,className:n()({"sticky  top-0  z-[5] rounded-t-xl":"page"==g,"border-b":!v}),children:(0,s.jsx)(r.ZP,{className:n()({"pt-md md:pt-lg ":"page"==g,"mx-auto max-w-screen-md px-sm md:px-lg ":"page"==g&&"md"===p,"mx-auto max-w-threadWidth  px-md md:px-lg ":"page"==g&&"lg"===p}),children:(0,s.jsxs)(r.ZP,{variant:f,className:n()("flex-col md:flex-row flex md:items-center gap-md md:justify-between ",{"pb-md md:pb-lg":"page"===g,"h-14":!x&&"section"===g}),children:[(0,s.jsxs)("div",{className:"md:hidden",children:[(0,s.jsxs)("div",{className:"flex justify-between gap-sm ",children:[k,N]}),x&&(0,s.jsx)("div",{className:"max-w-md w-full mt-md",children:x})]}),(0,s.jsxs)("div",{className:"hidden md:flex items-center justify-between gap-sm grow",children:[k,(0,s.jsxs)("div",{className:"flex items-center gap-sm grow justify-end",children:[N,x&&(0,s.jsx)("div",{className:"max-w-md grow",children:x})]})]})]})})})}}},function(e){e.O(0,[4749,8154,2888,9774,179],function(){return e(e.s=70571)}),_N_E=e.O()}]);