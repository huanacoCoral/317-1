"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8154],{49544:function(e,l){l.DF={prefix:"far",iconName:"eye",icon:[576,512,[128065],"f06e","M288 80c-65.2 0-118.8 29.6-159.9 67.7C89.6 183.5 63 226 49.4 256c13.6 30 40.2 72.5 78.6 108.3C169.2 402.4 222.8 432 288 432s118.8-29.6 159.9-67.7C486.4 328.5 513 286 526.6 256c-13.6-30-40.2-72.5-78.6-108.3C406.8 109.6 353.2 80 288 80zM95.4 112.6C142.5 68.8 207.2 32 288 32s145.5 36.8 192.6 80.6c46.8 43.5 78.1 95.4 93 131.1c3.3 7.9 3.3 16.7 0 24.6c-14.9 35.7-46.2 87.7-93 131.1C433.5 443.2 368.8 480 288 480s-145.5-36.8-192.6-80.6C48.6 356 17.3 304 2.5 268.3c-3.3-7.9-3.3-16.7 0-24.6C17.3 208 48.6 156 95.4 112.6zM288 336c44.2 0 80-35.8 80-80s-35.8-80-80-80c-.7 0-1.3 0-2 0c1.3 5.1 2 10.5 2 16c0 35.3-28.7 64-64 64c-5.5 0-10.9-.7-16-2c0 .7 0 1.3 0 2c0 44.2 35.8 80 80 80zm0-208a128 128 0 1 1 0 256 128 128 0 1 1 0-256z"]},l.Md=l.DF},75987:function(e,l){l.DF={prefix:"far",iconName:"grid-round-2",icon:[512,512,[],"e5db","M128 176a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm96-48A96 96 0 1 1 32 128a96 96 0 1 1 192 0zM128 432a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm96-48A96 96 0 1 1 32 384a96 96 0 1 1 192 0zM336 128a48 48 0 1 0 96 0 48 48 0 1 0 -96 0zm48 96a96 96 0 1 1 0-192 96 96 0 1 1 0 192zm0 208a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm96-48a96 96 0 1 1 -192 0 96 96 0 1 1 192 0z"]},l.wx=l.DF},36353:function(e,l){l.DF={prefix:"fas",iconName:"pen-to-square",icon:[512,512,["edit"],"f044","M471.6 21.7c-21.9-21.9-57.3-21.9-79.2 0L362.3 51.7l97.9 97.9 30.1-30.1c21.9-21.9 21.9-57.3 0-79.2L471.6 21.7zm-299.2 220c-6.1 6.1-10.8 13.6-13.5 21.9l-29.6 88.8c-2.9 8.6-.6 18.1 5.8 24.6s15.9 8.7 24.6 5.8l88.8-29.6c8.2-2.7 15.7-7.4 21.9-13.5L437.7 172.3 339.7 74.3 172.4 241.7zM96 64C43 64 0 107 0 160V416c0 53 43 96 96 96H352c53 0 96-43 96-96V320c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H96z"]},l.Y=l.DF},9269:function(e,l){l.DF={prefix:"fas",iconName:"user",icon:[448,512,[128100,62144],"f007","M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512H418.3c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304H178.3z"]},l.IL=l.DF},42970:function(e,l){l.DF={prefix:"fas",iconName:"user-secret",icon:[448,512,[128373],"f21b","M224 16c-6.7 0-10.8-2.8-15.5-6.1C201.9 5.4 194 0 176 0c-30.5 0-52 43.7-66 89.4C62.7 98.1 32 112.2 32 128c0 14.3 25 27.1 64.6 35.9c-.4 4-.6 8-.6 12.1c0 17 3.3 33.2 9.3 48H45.4C38 224 32 230 32 237.4c0 1.7 .3 3.4 1 5l38.8 96.9C28.2 371.8 0 423.8 0 482.3C0 498.7 13.3 512 29.7 512H418.3c16.4 0 29.7-13.3 29.7-29.7c0-58.5-28.2-110.4-71.7-143L415 242.4c.6-1.6 1-3.3 1-5c0-7.4-6-13.4-13.4-13.4H342.7c6-14.8 9.3-31 9.3-48c0-4.1-.2-8.1-.6-12.1C391 155.1 416 142.3 416 128c0-15.8-30.7-29.9-78-38.6C324 43.7 302.5 0 272 0c-18 0-25.9 5.4-32.5 9.9c-4.8 3.3-8.8 6.1-15.5 6.1zm56 208H267.6c-16.5 0-31.1-10.6-36.3-26.2c-2.3-7-12.2-7-14.5 0c-5.2 15.6-19.9 26.2-36.3 26.2H168c-22.1 0-40-17.9-40-40V169.6c28.2 4.1 61 6.4 96 6.4s67.8-2.3 96-6.4V184c0 22.1-17.9 40-40 40zm-88 96l16 32L176 480 128 288l64 32zm128-32L272 480 240 352l16-32 64-32z"]},l.BC=l.DF},61851:function(e,l,t){t.d(l,{i:function(){return f}});var s=t(97458),i=t(71485),n=t(46975),a=t(32647),c=t(49544),r=t(80937),o=t(88983),u=t(51903),m=t(6071),d=t(19494),x=t(51865),v=t.n(x);let f=e=>{let{title:l,description:t,authorImage:x,featuredImage:f,createNew:g,socialInfo:h,includeHeader:p=!0}=e,j=(0,i.useTranslations)("shared");return(0,s.jsxs)(o.ZP,{className:"mt-md flex h-full flex-col rounded-lg border transition duration-200 hover:ring-1",children:[(0,s.jsx)(o.ZP,{variant:"offset",className:"m-xs  overflow-hidden rounded-md",children:p?(0,s.jsx)(u.Z,{src:f,rounded:"md",containerClassName:"h-24",imageClassName:"object-cover object-center",alt:l,useNextImage:!1,includeLightBoxModal:!1}):null}),(0,s.jsxs)("div",{className:v()("flex min-h-[120px] grow flex-col px-md pt-sm pb-md",{}),children:[(0,s.jsxs)("div",{className:"grow",children:[(0,s.jsx)(m.Z,{variant:"baseSemi",className:"line-clamp-2",children:l}),(0,s.jsx)(m.Z,{color:"light",variant:"small",className:"mt-xs line-clamp-2",children:t})]}),(0,s.jsxs)("div",{className:"flex flex-row justify-between",children:[g?(0,s.jsx)(d.Z,{text:j("create"),size:"small",variant:"border",icon:r.r8}):(0,s.jsx)(a.Z,{size:"small",user:x}),g?null:(0,s.jsx)(s.Fragment,{children:(null==h?void 0:h.view_count)>0&&(0,s.jsx)(n.W,{icon:c.Md,count:null==h?void 0:h.view_count})})]})]})]})}},10442:function(e,l,t){var s=t(97458),i=t(35649);t(52983);var n=t(71485),a=t(62361),c=t(57818),r=t(75313),o=t(35921),u=t(849),m=t(51746),d=t(88983),x=t(6071),v=t(67691),f=t(19494),g=t(79738);l.Z=e=>{var l;let{collection:t,acceptInvite:h,declineInvite:p,showLinkToCollection:j=!0}=e,y=(0,a.useRouter)(),_=t.access>m.uv.PRIVATE_READ,C=(0,n.useTranslations)("collection.contributor");return(0,s.jsxs)(d.ZP,{variant:"offset",className:"rounded p-sm",children:[(0,s.jsx)(d.ZP,{className:"border-b pb-sm",children:(0,s.jsx)(x.Z,{color:"light",variant:"tiny",className:"grow",children:C("invitedSuccess")})}),(0,s.jsxs)(x.Z,{variant:"baseSemi",className:"mb-md mt-sm",children:[(0,s.jsxs)("div",{className:"mb-sm flex items-center gap-x-sm",children:[(0,s.jsx)(r.B,{unified:null!==(l=t.emoji)&&void 0!==l?l:v.$Y,size:"small"}),(0,s.jsx)(x.Z,{variant:"baseSemi",children:t.title})]}),(0,s.jsx)(c.Z,{textColor:"light",username:t.owner_user.username,image:t.owner_user.image,showAvatar:!0})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex gap-x-sm",children:[(0,s.jsx)(f.Z,{variant:"primary",text:"Accept",size:"tiny",onClick:h}),(0,s.jsx)(f.Z,{text:"Discard",size:"tiny",onClick:p})]}),j&&(_?(0,s.jsx)(g.Z,{size:"tiny",text:"View",chevron:!0,chevronIcon:o._t,onClick:()=>y.push("/collections/".concat(t.slug))}):(0,s.jsxs)(x.Z,{variant:"tiny",color:"light",className:"mr-sm",children:[(0,s.jsx)(i.G,{icon:u.by,className:"mr-xs"}),(0,s.jsx)("span",{children:"Secret"})]}))]})]})}},66632:function(e,l,t){t.d(l,{f:function(){return d}});var s=t(97458);t(52983);var i=t(71485),n=t(65531),a=t.n(n),c=t(64808),r=t(61851),o=t(38914),u=t(88983),m=t(6071);let d=e=>{let{articles:l,fetchNextPage:t,hasNextPage:n=!1,showLoadingState:d=!1,showEmptyState:x=!1}=e,v=(null!=l?l:[]).map(c.l3),f=(0,i.useTranslations)("threads.main");return x&&0===v.length?(0,s.jsx)(u.ZP,{variant:"offset",className:"mt-md flex items-center justify-center rounded p-xl",children:(0,s.jsx)(m.Z,{color:"light",children:f("noArticles")})}):(0,s.jsx)(o.D,{fetchNextPage:t,hasNextPage:n,showLoadingState:d,itemsToRender:v,children:(0,s.jsx)("div",{className:"grid grid-cols-3 gap-md pb-lg",children:v.map(e=>(0,s.jsx)(a(),{className:"block",href:e.href,children:(0,s.jsx)(r.i,{title:e.title,authorImage:e.authorImage,featuredImage:e.featuredImage,socialInfo:e.socialInfo})},e.backendUUID))})})}},71031:function(e,l,t){var s=t(97458),i=t(52983),n=t(88983),a=t(6071),c=t(51865),r=t.n(c);l.Z=e=>{let{children:l,maxFaces:t=3,showMore:c=!0,clickable:o=!1,size:u="medium",onAvatarClick:m}=e,d=i.Children.count(l);return(0,s.jsxs)(n.ZP,{onClick:o?m:void 0,bgHover:o?"offset":void 0,className:r()("group flex items-center",{"cursor-pointer rounded-full p-xs transition-all":o}),children:[i.Children.map(l,(e,l)=>l<t?(0,s.jsx)(n.ZP,{variant:"background",className:r()("rounded-full group-hover:bg-transparent",{"relative transition-all duration-200 ease-in-out":0!==l,"-ml-[10px]  p-two group-hover:-ml-xs":0!==l&&"small"===u,"-ml-[16px]  p-two group-hover:-ml-sm":0!==l&&"medium"===u}),children:(0,s.jsx)("div",{children:e})},l):null),c&&d>t&&(0,s.jsx)(n.ZP,{children:(0,s.jsxs)(a.Z,{variant:"smallCaps",color:"light",className:"px-xs",children:["+",d-t]})})]})}},57818:function(e,l,t){var s=t(97458),i=t(82129),n=t(68493),a=t(52983),c=t(71485),r=t(32647),o=t(50882),u=t(32100),m=t(85393),d=t(19494),x=t(6071),v=t(88983),f=t(79738);l.Z=e=>{var l,t,g;let{showAvatar:h,showCreatorLabel:p,showEdit:j,isCurrentUser:y=!0,textColor:_,textVariant:C="smallBold",username:N,image:b,anon:D}=e,{data:Z,update:z}=(0,n.useSession)(),[w,Q]=a.useState(!1),[S,k]=a.useState(null!=N?N:y?null==Z?void 0:null===(l=Z.user)||void 0===l?void 0:l.username:"Anonymous"),[M,A]=a.useState(),{isMobileUserAgent:I}=(0,u.d)(),P=(0,c.useTranslations)("settings.account"),F=async()=>fetch("/api/user",{method:"PUT",body:JSON.stringify({username:S})}),{mutate:E,isLoading:T}=(0,i.D)(F,{onSuccess:e=>{e.json().then(l=>{if(200!==e.status){A(l.message);return}Q(!1),A(void 0),z()})}});(0,a.useEffect)(()=>{var e;k(null!=N?N:y?null==Z?void 0:null===(e=Z.user)||void 0===e?void 0:e.username:"Anonymous")},[N,y,null==Z?void 0:null===(t=Z.user)||void 0===t?void 0:t.username]);let H="@perplexity-bot@"===S;return(0,s.jsxs)("div",{className:"relative flex items-center gap-x-xs",children:[h&&(0,s.jsx)(r.Z,{size:"small",anon:D,user:H?"/static/images/bot.png":null!=b?b:y&&null!==(g=null==Z?void 0:Z.user.image)&&void 0!==g?g:void 0}),w?(0,s.jsx)("div",{children:(0,s.jsx)(m.Z,{isMobileUserAgent:I,value:S,disabled:T,errorText:null!=M?M:""===S?"Username cannot be empty":"",onChange:e=>{k(e.target.value)},className:"md:min-w-[300px]",inlineEditBlock:Z&&(0,s.jsxs)("div",{className:"ml-sm flex items-center gap-x-xs",children:[(0,s.jsx)(d.Z,{text:P("save"),variant:S===Z.user.username||""===S||T?"common":"primary",size:"small",disabled:S===Z.user.username||""===S||T,onClick:()=>E()}),(0,s.jsx)(d.Z,{text:P("cancel"),size:"small",disabled:T,onClick:()=>{k(Z.user.username),Q(!1)}})]})})}):(0,s.jsx)(x.Z,{variant:C,color:_,className:"break-all line-clamp-1",children:D?"Anonymous":H?"Perplexity Bot":S}),p&&(0,s.jsx)(v.ZP,{variant:"offset",className:"rounded-full px-sm py-xs",children:(0,s.jsx)(x.Z,{variant:"tiny",color:"light",children:"Author"})}),j&&!w&&(0,s.jsx)(f.Z,{pill:!0,size:"small",icon:o.faPenToSquare,onClick:()=>Q(!0)})]})}},4461:function(e,l,t){t.d(l,{a:function(){return o}});var s=t(78931),i=t(82129),n=t(4544),a=t(80425),c=t(97905);let r=["fetch_invited_collections"],o=()=>{let e=(0,s.NL)(),l=(0,n.nO)(),{mutate:t}=(0,i.D)({mutationFn:async e=>{let{collection:t,callback:s}=e;await l.emitWithAck("respond_to_invitation",{collection_uuid:t.uuid,accept:!0,return_collection:!1}),null==s||s()},onMutate:async l=>{await e.cancelQueries(r),await e.cancelQueries(a.Xt);let t=e.getQueryData(a.Xt),s=e.getQueryData(r);return l.shouldRefetchCurrentCollection?e.setQueryData(["get_collection",{collection_slug:l.collection.slug.slice(-22)}],e=>({...e,user_permission:c.XJ.WRITER})):e.setQueryData(a.Xt,e=>{let t=(e=e||{pages:[],pageParams:[]}).pages[0];return{...e,pages:[[l.collection,...t]]}}),e.setQueryData(r,e=>e.filter(e=>e.uuid!==l.collection.uuid)),{previousCollections:t,previousInvitedCollections:s}},onError:(l,t,s)=>{e.setQueryData(a.Xt,s.previousCollections),e.setQueryData(r,s.previousInvitedCollections)},onSuccess:()=>{e.invalidateQueries(a.Xt),e.invalidateQueries(r)}}),{mutate:o}=(0,i.D)({mutationFn:async e=>{let{collection:t,callback:s}=e;await l.emitWithAck("respond_to_invitation",{collection_uuid:t.uuid,accept:!1,return_collection:!1}),null==s||s()},onMutate:async l=>{await e.cancelQueries(r);let t=e.getQueryData(r);return e.setQueryData(r,e=>e.filter(e=>e.uuid!==l.collection.uuid)),{previousInvitedCollections:t}},onError:(l,t,s)=>{e.setQueryData(r,s.previousInvitedCollections)},onSuccess:()=>{e.invalidateQueries(r)}}),{mutate:u}=(0,i.D)({mutationFn:async e=>{let{email:t,collectionUUID:s,callback:i}=e;await l.emitWithAck("invite_to_collection",{collection_uuid:s,contributor_email:t}),null==i||i()},onMutate:async l=>{let t=["get_collection",{collection_slug:l.collectionSlug.slice(-22)}];await e.cancelQueries(t);let s=e.getQueryData(t);return e.setQueryData(t,e=>({...e,contributor_users:e.contributor_users.concat({email:l.email,username:l.email,permission:c.XJ.INVITED_WRITER})})),{previousCollection:s}},onError:(l,t,s)=>{let i=t.collectionSlug.slice(-22);e.setQueryData(["get_collection",{collection_slug:i}],s.previousCollection)},onSuccess:(l,t)=>{let s=t.collectionSlug.slice(-22);e.invalidateQueries({queryKey:["get_collection",{collection_slug:s}]})}}),{mutate:m}=(0,i.D)({mutationFn:async e=>{let{email:t,collectionUUID:s,callback:i}=e;await l.emitWithAck("remove_from_collection",{collection_uuid:s,email:t}),null==i||i()},onMutate:async l=>{let t=["get_collection",{collection_slug:l.collectionSlug.slice(-22)}];await e.cancelQueries(t);let s=e.getQueryData(t);return e.setQueryData(t,e=>({...e,contributor_users:e.contributor_users.filter(e=>e.email!==l.email)})),{previousCollection:s}},onError:(l,t,s)=>{let i=t.collectionSlug.slice(-22);e.setQueryData(["get_collection",{collection_slug:i}],s.previousCollection)},onSuccess:(l,t)=>{let s=t.collectionSlug.slice(-22);e.invalidateQueries({queryKey:["get_collection",{collection_slug:s}]})}});return{addContributorUser:u,removeContributorUser:m,acceptCollectionInvite:t,declineCollectionInvite:o}}}}]);